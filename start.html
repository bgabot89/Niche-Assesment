<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<title>Niche Web Developer Exercise</title>

<!--
Colors
Tan:                #FAF3ED
Light Green:        #D0ECDD
Green:              #227146
Light Gray:         #F1F1F1
Med Gray:           #657076
Dark Gray:          #212A37
-->

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
<link href="stylesheets/styles.css" rel="stylesheet">
</head>
<body>

<!--1st Question-->
<section class="container">
<div class="question" id="question-1">
        <div class="text-center">
            <div class="vote vote-tgl">
                <span class="up"></span>
                <span class="val">22</span>
                <span class="down"></span>
            </div>
        </div>

        <div class="actions">
                <img src="assets/Share.svg"/>
                <span>Share</span>
        </div> 

    <div class="tile-info">
        <div class="user">
                <img class="user-img" src="assets/evan.jpg" />
                <span class="user-name">Evan</span>
                <span>3 days ago</span>
        </div>

        <div class="content">
            What's the best undergraduate major if I'm interested in going to med school? <br/>
            <span class="total-responses"> </span> Responses
        </div>

        <div class="replies">
            <div class="reply">
                <div class="vote like">
                    <span>48</span>
                    <span>♥</span>
                </div>
                <div>Biology</div>
            </div>
            <div class="reply">
                <div class="vote like">
                    <span>32</span>
                    <span>♥</span>
                </div>
                <div>Psychology</div>
            </div>
            <div class="reply">
                <div class="vote like">
                    <span>24</span>
                    <span>♥</span>
                </div>
                <div>Athletic training</div>
            </div>
            <div class="reply">
                <div class="vote like">
                    <span>8</span>
                    <span>♥</span>
                </div>
                <div>Biochem</div>
            </div>
        </div>

        <div class="row">
        <div class="response col-md-5">
            Add your response
        </div>

        <div class="response response-btn col-md-5">
            View <span class="response-amt"></span> More Responses
        </div>
        </div>
    </div>
</div>
</section>

<!--2nd Question-->
<section class="container">
<div class="question" id="question-2">
        <div class="text-center">
            <div class="vote vote-tgl">
                <span class="up"></span>
                <span class="val">32</span>
                <span class="down"></span>
            </div>
        </div>

        <div class="actions">
                <img src="assets/Share.svg"/>
                <span>Share</span>
        </div> 

    <div class="tile-info">
    <div class="user">
        <img class="user-img" src="assets/alexis.jpg" />
        <span class="user-name">Alexis</span>
        <span>6 days ago</span>
    </div>

    <div class="content">
            Which AP classes are going to get me the best college credits as an engineering major?
            <br/><span class="total-responses"> </span> Responses
        </div>

    <div class="replies">
        <div class="reply">
            <div class="vote like">
                <span>17</span>
                <span>♥</span>
            </div>
            <div>Physics 1</div>
        </div>
        <div class="reply">
            <div class="vote like">
                <span>13</span>
                <span>♥</span>
            </div>
            <div>Calculus BC</div>
        </div>
        <div class="reply">
            <div class="vote like">
                <span>8</span>
                <span>♥</span>
            </div>
            <div>Physics C</div>
        </div>
        <div class="reply">
            <div class="vote like">
                <span>6</span>
                <span>♥</span>
            </div>
            <div>Latin</div>
        </div>
        <div class="reply">
            <div class="vote like">
                <span>4</span>
                <span>♥</span>
            </div>
            <div>English</div>
        </div>
        <div class="reply">
            <div class="vote like">
                <span>1</span>
                <span>♥</span>
            </div>
            <div>Calculus AB</div>
        </div>
        <div class="reply">
            <div class="vote like">
                <span>1</span>
                <span>♥</span>
            </div>
            <div>Logic</div>
        </div>
    </div>

    <div class="row">
            <div class="response col-md-5">
                Add your response
            </div>
    
            <div class="response response-btn col-md-5">
                    View <span class="response-amt"></span> More Responses
                </div>
            </div>
    </div>
</div>
</section>
</body>


<script>
//add js scripts here   

//variable declarations 

// const Rating = document.querySelector('.val');

// const upvote = document.querySelector('.up');

// const downvote = document.querySelector('.down');

//logic: select the classname vote-tgl
// const Rating = document.querySelectorAll(".vote-tgl");

const UpSelector = document.querySelectorAll(".up");
const DownSelector = document.querySelectorAll(".down");
const RatingSelector = document.querySelectorAll('.val');


//less DRY way
const vote = (type, i) => {
// const buttons = { '1': upvote, '-1': downvote}
const buttons = { '1': UpSelector[i], '-1': DownSelector[i]}
const score = Number(RatingSelector[i].textContent);

if (buttons[type].classList.contains('active')) {
    RatingSelector[i].textContent = score - type;
    buttons[type].classList.remove('active');
}
else if (buttons[-type].classList.contains('active')) {
    RatingSelector[i].textContent = score + 2 * type;
    buttons[-type].classList.remove('active');
    buttons[type].classList.add('active');
} else {
    RatingSelector[i].textContent = score + type;
    console.log('s');
    buttons[type].classList.add('active');
}
}

//OLD
// upvote.addEventListener('click', () => {
//     console.log('+1'); 
//     vote(1)
//     });

// downvote.addEventListener('click', () => {
//     console.log('-1'); 
//     vote(-1)
// });


//Iterate through each up/downvote selector and callback vote function
// const RatingList = document.querySelectorAll(".val");

for (let i=0; i < UpSelector.length; i++) {
    UpSelector[i].addEventListener('click', () => {
    vote(1,i);
    })       
}

for (let i=0; i < DownSelector.length; i++) {
    DownSelector[i].addEventListener('click', () => {
    vote(-1,i);
    })
}

//if responselist is greater than 4, hide additional entries with an i >=3, also append total amount of responses to the ## responses

//1st Card
const Responses = document.querySelectorAll('#question-1 .reply');
const target = 4;

document.querySelector('#question-1 .total-responses').innerHTML = Responses.length;

if (Responses.length <=target) {
    console.log(Responses.length)
    document.querySelector('#question-1 .response-btn').hidden = true;
} else {
    document.querySelector("#question-1 .response-btn .response-amt").innerHTML = Responses.length - target;
}

//Second Card
const Responses2 = document.querySelectorAll('#question-2 .reply');
const Resbutn2 = document.querySelector('#question-2 .response-btn');
document.querySelector('#question-2 .total-responses').innerHTML = Responses2.length;

if (Responses2.length <= target ) {
    Resbutn2.hidden = true;
} else {
    document.querySelector("#question-2 .response-btn .response-amt").innerHTML = Responses2.length - target;
    for (let i=target; i< Responses2.length; i++) {
        Responses2[i].hidden=true;        
    }
    Resbutn2.addEventListener('click', () => {
        for (let i=target; i< Responses2.length; i++) {
            Responses2[i].hidden=false;        
        }
        Resbutn2.hidden=true;   
    })
}


// upvote.addEventListener('click', function() {

//     const score = Number(Rating.textContent);

//     if (upvote.classList.contains('active')) {
//         upvote.classList.remove('active');
//         Rating.textContent = score - 1;
//         console.log(Rating);
//     } else if (downvote.classList.contains('active')){
//         upvote.classList.add('active');
//         downvote.classList.add('active');
//         Rating.textContent = score + 2;

//     } else {
//         upvote.classList.add('active');
//         Rating.textContent = score + 1;
//         console.log(Rating);
//     }
// })

// downvote.addEventListener('click', function() {
//     const score = Number(Rating.textContent);

//     if (downvote.classList.contains('active')) {
//         downvote.classList.remove('active');
//         Rating.textContent = score + 1;
//     } else if (upvote.classList.contains('active')){
//         downvote.classList.add('active');
//         upvote.classList.remove('active');
//         Rating.textContent = score - 2;
//     } else {
//         downvote.classList.add('active');
//         Rating.textContent = score - 1;
//         console.log(Rating);
//     }
// })



</script>
</html>



